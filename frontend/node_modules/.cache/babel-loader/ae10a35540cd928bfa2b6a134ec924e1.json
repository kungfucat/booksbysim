{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\gurje\\\\Desktop\\\\new\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link,useParams}from'react-router-dom';import{createProduct,deleteProduct,listProducts}from'../actions/productActions';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import{PRODUCT_CREATE_RESET,PRODUCT_DELETE_RESET}from'../constants/productConstants';export default function ProductListScreen(props){var _useParams=useParams(),_useParams$pageNumber=_useParams.pageNumber,pageNumber=_useParams$pageNumber===void 0?1:_useParams$pageNumber;var sellerMode=props.match.path.indexOf('/seller')>=0;var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products,page=productList.page,pages=productList.pages;var productCreate=useSelector(function(state){return state.productCreate;});var loadingCreate=productCreate.loading,errorCreate=productCreate.error,successCreate=productCreate.success,createdProduct=productCreate.product;var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,errorDelete=productDelete.error,successDelete=productDelete.success;var userSignin=useSelector(function(state){return state.userSignin;});var userInfo=userSignin.userInfo;var dispatch=useDispatch();useEffect(function(){if(successCreate){dispatch({type:PRODUCT_CREATE_RESET});props.history.push(\"/product/\".concat(createdProduct._id,\"/edit\"));}if(successDelete){dispatch({type:PRODUCT_DELETE_RESET});}dispatch(listProducts({seller:sellerMode?userInfo._id:'',pageNumber:pageNumber}));},[createdProduct,dispatch,props.history,sellerMode,successCreate,successDelete,userInfo._id,pageNumber]);var deleteHandler=function deleteHandler(product){if(window.confirm('Are you sure to delete?')){dispatch(deleteProduct(product._id));}};var createHandler=function createHandler(){dispatch(createProduct());};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Products\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"primary\",onClick:createHandler},\"Create Product\")),loadingDelete&&/*#__PURE__*/React.createElement(LoadingBox,null),errorDelete&&/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},errorDelete),loadingCreate&&/*#__PURE__*/React.createElement(LoadingBox,null),errorCreate&&/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},errorCreate),loading?/*#__PURE__*/React.createElement(LoadingBox,null):error?/*#__PURE__*/React.createElement(MessageBox,{variant:\"danger\"},error):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"NAME\"),/*#__PURE__*/React.createElement(\"th\",null,\"PRICE\"),/*#__PURE__*/React.createElement(\"th\",null,\"CATEGORY\"),/*#__PURE__*/React.createElement(\"th\",null,\"BRAND\"),/*#__PURE__*/React.createElement(\"th\",null,\"ACTIONS\"))),/*#__PURE__*/React.createElement(\"tbody\",null,products.map(function(product){return/*#__PURE__*/React.createElement(\"tr\",{key:product._id},/*#__PURE__*/React.createElement(\"td\",null,product._id),/*#__PURE__*/React.createElement(\"td\",null,product.name),/*#__PURE__*/React.createElement(\"td\",null,product.price),/*#__PURE__*/React.createElement(\"td\",null,product.category),/*#__PURE__*/React.createElement(\"td\",null,product.brand),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return props.history.push(\"/product/\".concat(product._id,\"/edit\"));}},\"Edit\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return deleteHandler(product);}},\"Delete\")));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row center pagination\"},_toConsumableArray(Array(pages).keys()).map(function(x){return/*#__PURE__*/React.createElement(Link,{className:x+1===page?'active':'',key:x+1,to:\"/productlist/pageNumber/\".concat(x+1)},x+1);}))));}","map":{"version":3,"sources":["C:/Users/gurje/Desktop/new/frontend/src/screens/ProductListScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","useParams","createProduct","deleteProduct","listProducts","LoadingBox","MessageBox","PRODUCT_CREATE_RESET","PRODUCT_DELETE_RESET","ProductListScreen","props","pageNumber","sellerMode","match","path","indexOf","productList","state","loading","error","products","page","pages","productCreate","loadingCreate","errorCreate","successCreate","success","createdProduct","product","productDelete","loadingDelete","errorDelete","successDelete","userSignin","userInfo","dispatch","type","history","push","_id","seller","deleteHandler","window","confirm","createHandler","map","name","price","category","brand","Array","keys","x"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport {\r\n  createProduct,\r\n  deleteProduct,\r\n  listProducts,\r\n} from '../actions/productActions';\r\nimport LoadingBox from '../components/LoadingBox';\r\nimport MessageBox from '../components/MessageBox';\r\nimport {\r\n  PRODUCT_CREATE_RESET,\r\n  PRODUCT_DELETE_RESET,\r\n} from '../constants/productConstants';\r\n\r\nexport default function ProductListScreen(props) {\r\n  const { pageNumber = 1 } = useParams();\r\n\r\n  const sellerMode = props.match.path.indexOf('/seller') >= 0;\r\n  const productList = useSelector((state) => state.productList);\r\n  const { loading, error, products, page, pages } = productList;\r\n\r\n  const productCreate = useSelector((state) => state.productCreate);\r\n  const {\r\n    loading: loadingCreate,\r\n    error: errorCreate,\r\n    success: successCreate,\r\n    product: createdProduct,\r\n  } = productCreate;\r\n\r\n  const productDelete = useSelector((state) => state.productDelete);\r\n  const {\r\n    loading: loadingDelete,\r\n    error: errorDelete,\r\n    success: successDelete,\r\n  } = productDelete;\r\n  const userSignin = useSelector((state) => state.userSignin);\r\n  const { userInfo } = userSignin;\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    if (successCreate) {\r\n      dispatch({ type: PRODUCT_CREATE_RESET });\r\n      props.history.push(`/product/${createdProduct._id}/edit`);\r\n    }\r\n    if (successDelete) {\r\n      dispatch({ type: PRODUCT_DELETE_RESET });\r\n    }\r\n    dispatch(\r\n      listProducts({ seller: sellerMode ? userInfo._id : '', pageNumber })\r\n    );\r\n  }, [\r\n    createdProduct,\r\n    dispatch,\r\n    props.history,\r\n    sellerMode,\r\n    successCreate,\r\n    successDelete,\r\n    userInfo._id,\r\n    pageNumber,\r\n  ]);\r\n\r\n  const deleteHandler = (product) => {\r\n    if (window.confirm('Are you sure to delete?')) {\r\n      dispatch(deleteProduct(product._id));\r\n    }\r\n  };\r\n  const createHandler = () => {\r\n    dispatch(createProduct());\r\n  };\r\n  return (\r\n    <div>\r\n      <div className=\"row\">\r\n        <h1>Products</h1>\r\n        <button type=\"button\" className=\"primary\" onClick={createHandler}>\r\n          Create Product\r\n        </button>\r\n      </div>\r\n\r\n      {loadingDelete && <LoadingBox></LoadingBox>}\r\n      {errorDelete && <MessageBox variant=\"danger\">{errorDelete}</MessageBox>}\r\n\r\n      {loadingCreate && <LoadingBox></LoadingBox>}\r\n      {errorCreate && <MessageBox variant=\"danger\">{errorCreate}</MessageBox>}\r\n      {loading ? (\r\n        <LoadingBox></LoadingBox>\r\n      ) : error ? (\r\n        <MessageBox variant=\"danger\">{error}</MessageBox>\r\n      ) : (\r\n        <>\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>ID</th>\r\n                <th>NAME</th>\r\n                <th>PRICE</th>\r\n                <th>CATEGORY</th>\r\n                <th>BRAND</th>\r\n                <th>ACTIONS</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {products.map((product) => (\r\n                <tr key={product._id}>\r\n                  <td>{product._id}</td>\r\n                  <td>{product.name}</td>\r\n                  <td>{product.price}</td>\r\n                  <td>{product.category}</td>\r\n                  <td>{product.brand}</td>\r\n                  <td>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"small\"\r\n                      onClick={() =>\r\n                        props.history.push(`/product/${product._id}/edit`)\r\n                      }\r\n                    >\r\n                      Edit\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"small\"\r\n                      onClick={() => deleteHandler(product)}\r\n                    >\r\n                      Delete\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n          <div className=\"row center pagination\">\r\n            {[...Array(pages).keys()].map((x) => (\r\n              <Link\r\n                className={x + 1 === page ? 'active' : ''}\r\n                key={x + 1}\r\n                to={`/productlist/pageNumber/${x + 1}`}\r\n              >\r\n                {x + 1}\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}